alignlen = 64
#offload = 0
#arch = mic

CC  = /opt/intel/bin/icc -std=gnu99
CXX = /opt/intel/bin/icpc
FC  = /opt/intel/bin/ifort
AR  = /opt/intel/bin/xiar rcs

ifeq "${arch}" "mic"
OPTFLAGS = -mmic -no-opt-prefetch
else ifeq "${arch}" "avx"
OPTFLAGS = -m64 -xAVX
else
OPTFLAGS = -m64 -xHost
endif

ifeq "${offload}" "1"
ifeq "${arch}" "mic"
$(error offload=1 can't be used with arch=mic)
endif
endif

ifeq "${offload}" "1"
AR += -qoffload-build
OPTFLAGS += -offload-option,mic,compiler,"-z defs -no-opt-prefetch"
else
OPTFLAGS += -D__ERD_PROFILE__ -no-offload
endif
